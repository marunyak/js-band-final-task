{"version":3,"sources":["images/shopping-cart.png","images/defaultPhoto.jpg","history/index.jsx","storage/index.js","reducers/user.jsx","reducers/filter.jsx","reducers/booksList.jsx","reducers/book.jsx","reducers/cart.jsx","reducers/index.jsx","actions/user.jsx","actions/booksList.jsx","actions/book.jsx","actions/filter.jsx","actions/cart.jsx","store/index.jsx","components/Navigation.jsx","components/Header.jsx","components/Main.jsx","components/spinner/spinner.jsx","pages/CatalogPage/components/BookItem.jsx","pages/CatalogPage/components/Filter.jsx","config.jsx","pages/CatalogPage/index.jsx","services/books-service.jsx","pages/NotFoundPage/index.jsx","pages/BookPage/components/BookCounter.jsx","pages/BookPage/components/BookContent.jsx","pages/BookPage/index.jsx","services/book-service.jsx","pages/CartPage/components/CartEmpty.jsx","pages/CartPage/components/CartItem.jsx","pages/CartPage/components/CartList.jsx","services/purchase-service.jsx","pages/CartPage/index.jsx","routes/ProtectedRoutes.jsx","pages/SignInPage/index.jsx","services/user-service.jsx","components/App.jsx","index.jsx"],"names":["module","exports","history","createHashHistory","storage","key","localStorage","getItem","item","setItem","JSON","stringify","removeItem","initialState","username","avatar","token","search","price","books","loading","error","id","undefined","title","author","level","description","cover","tags","isLoading","loaded","message","reducers","combineReducers","user","state","action","type","payload","newState","userData","get","parse","remove","catalog","book","err","filter","newValue","cart","isCheck","length","list","map","count","console","log","router","connectRouter","middleware","applyMiddleware","thunk","routerMiddleware","store","createStore","Navigation","handleClick","signOut","props","this","className","to","src","img","alt","style","width","height","cursor","onClick","React","Component","connect","dispatch","children","val","Main","Spinner","BookItem","Filter","handleChange","target","value","name","changeFilter","method","onChange","placeholder","config","baseURL","Catalog","toLowerCase","RegExp","priceTypes","none","low_price","medium_price","high_price","getBooksFetch","newBooks","newItem","withRouter","fetch","headers","Accept","Authorization","then","res","json","response","catch","replace","NotFound","BookCounter","temp","setState","input","handleSubmit","e","preventDefault","addToCart","countBooks","borderStyle","borderWidth","borderRadius","onSubmit","min","max","defaultValue","ref","node","required","toFixed","right","bottom","join","Book","getBookFetch","match","params","data","fetchBookSuccess","fetchBookFail","CartEmpty","margin","paddingTop","CartItem","info","CartList","addPurchase","disabled","reduce","sum","body","purchaseFail","Cart","userToken","from","path","component","SignIn","handleValidation","valueLength","errorField","innerHTML","login","htmlFor","display","userInfo","add","checkSign","ProtectedRoutes","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.51909cf3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/shopping-cart.b3066055.png\";","module.exports = __webpack_public_path__ + \"static/media/defaultPhoto.b1c4e6fe.jpg\";","import { createHashHistory } from 'history';\n\nconst history = createHashHistory();\nexport default history;\n","/* eslint-disable class-methods-use-this */\nclass LocalStorage {\n  get(key) {\n    return localStorage.getItem(key);\n  }\n\n  add(key, item) {\n    localStorage.setItem(key, JSON.stringify(item));\n  }\n\n  remove(key) {\n    localStorage.removeItem(key);\n  }\n}\n\nconst storage = new LocalStorage();\n\nexport default storage;\n","import { SIGN_IN, CHECK_SIGN, SIGN_OUT } from '../actions';\nimport storage from '../storage/index';\n\nconst initialState = {\n  username: '',\n  avatar: '',\n  token: ''\n};\n\nexport const user = (state = initialState, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case SIGN_IN: {\n      const newState = {\n        ...state,\n        username: payload.username,\n        avatar: payload.avatar,\n        token: payload.token,\n      };\n      return newState;\n    }\n    case CHECK_SIGN: {\n      let userData = storage.get('user');\n      if (userData) {\n        userData = JSON.parse(userData);\n        return { ...state, ...userData };\n      }\n      return state;\n    }\n    case SIGN_OUT: {\n      storage.remove('user');\n      return { ...state, ...initialState };\n    }\n    default:\n      return state;\n  }\n};\n","import { CHANGE_FILTER } from '../actions';\n\nconst initialState = {\n  search: '',\n  price: 'none'\n};\n\nexport const filter = (state = initialState, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case CHANGE_FILTER: {\n      return {\n        ...state,\n        ...payload.newValue\n      };\n    }\n    default:\n      return state;\n  }\n};\n","import { FETCH_BOOKS, FETCH_BOOKS_SUCCESS, FETCH_BOOKS_FAIL } from '../actions';\n\nconst initialState = {\n  books: [],\n  loading: false,\n  error: false,\n};\n\nexport const catalog = (state = initialState, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case FETCH_BOOKS:\n      return {\n        ...state,\n        loading: true,\n      };\n    case FETCH_BOOKS_SUCCESS:\n      return {\n        ...state,\n        books: [...payload],\n        loading: false,\n      };\n    case FETCH_BOOKS_FAIL:\n      return {\n        ...state,\n        error: action.error,\n        loading: false,\n      };\n    default:\n      return state;\n  }\n};\n","import { LOAD_BOOK_SUCCESS, LOAD_BOOK_FAIL } from '../actions';\n\nconst initialState = {\n  id: undefined,\n  title: undefined,\n  author: undefined,\n  level: undefined,\n  description: undefined,\n  cover: undefined,\n  tags: undefined,\n  isLoading: true,\n  loaded: false,\n  error: null\n};\n\nexport const book = (state = initialState, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case LOAD_BOOK_SUCCESS:\n      return {\n        ...state,\n        ...payload,\n        isLoading: false\n      };\n    case LOAD_BOOK_FAIL:\n      return {\n        ...state,\n        error: payload.err,\n        isLoading: false,\n      };\n    default:\n      return state;\n  }\n};\n","import { ADD_BOOK, PURCHASE_SUCCESS, PURCHASE_FAIL } from '../actions';\n\nconst initialState = {\n  books: [],\n  message: undefined\n};\n\nexport const cart = (state = initialState, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case ADD_BOOK: {\n      let isCheck = false;\n      if (state.books.length > 0) {\n        const list = state.books.map((item) => {\n          if (item.id === payload.newValue.id) {\n            isCheck = true;\n            // eslint-disable-next-line no-param-reassign\n            item = {\n              ...item,\n              count: payload.newValue.count\n            };\n          }\n          return item;\n        });\n        if (isCheck) {\n          return {\n            ...state,\n            books: list\n          };\n        }\n        return {\n          ...state,\n          books: [...state.books, payload.newValue]\n        };\n      }\n      return {\n        ...state,\n        books: [...state.books, payload.newValue]\n      };\n    }\n    case PURCHASE_SUCCESS: {\n      console.log(payload.message);\n      return {\n        ...initialState, message: payload.message\n      };\n    }\n    case PURCHASE_FAIL: {\n      console.log(payload.message);\n      return {\n        ...state,\n        message: payload.message,\n        loading: false\n      };\n    }\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from 'redux';\nimport { connectRouter } from 'connected-react-router';\nimport history from '../history';\nimport { user } from './user';\nimport { filter } from './filter';\nimport { catalog } from './booksList';\nimport { book } from './book';\nimport { cart } from './cart';\n\nconst reducers = combineReducers({\n  user, catalog, book, filter, cart, router: connectRouter(history)\n});\n\nexport default reducers;\n","export const SIGN_IN = 'SIGN_IN';\nexport const CHECK_SIGN = 'CHECK_SIGN';\nexport const SIGN_OUT = 'SIGN_OUT';\n\nexport const signIn = (userInfo) => ({\n  type: SIGN_IN,\n  payload: userInfo\n});\n\nexport const checkSign = () => ({\n  type: CHECK_SIGN\n});\n\nexport const signOut = () => ({\n  type: SIGN_OUT\n});\n","export const FETCH_BOOKS = 'FETCH_BOOKS';\nexport const FETCH_BOOKS_SUCCESS = 'FETCH_BOOKS_SUCCESS';\nexport const FETCH_BOOKS_FAIL = 'FETCH_BOOKS_FAIL';\n\nexport const fetchBooks = () => ({\n  type: FETCH_BOOKS,\n});\n\nexport const fetchBooksSuccess = (payload) => ({\n  type: FETCH_BOOKS_SUCCESS,\n  payload,\n});\n\nexport const fetchBooksFail = (error) => ({\n  type: FETCH_BOOKS_FAIL,\n  error,\n});\n","export const LOAD_BOOK_SUCCESS = 'LOAD_BOOK_SUCCESS';\nexport const LOAD_BOOK_FAIL = 'LOAD_BOOK_FAIL';\n\nexport const fetchBookSuccess = (data) => ({\n  type: LOAD_BOOK_SUCCESS,\n  payload: data\n});\n\nexport const fetchBookFail = (err) => ({\n  type: LOAD_BOOK_FAIL,\n  payload: err\n});\n","export const CHANGE_FILTER = 'CHANGE_FILTER';\nexport const FILTER_BOOKS = 'FILTER_BOOKS';\n\nexport const changeFilter = (newValue) => ({\n  type: CHANGE_FILTER,\n  payload: { newValue }\n});\n","export const ADD_BOOK = 'ADD_BOOK';\nexport const PURCHASE_SUCCESS = 'PURCHASE_SUCCESS';\nexport const PURCHASE_FAIL = 'PURCHASE_FAIL';\n\nexport const addToCart = (newValue) => ({\n  type: ADD_BOOK,\n  payload: { newValue }\n});\n\nexport const purchaseSuccess = (res) => ({\n  type: PURCHASE_SUCCESS,\n  payload: res\n});\n\nexport const purchaseFail = (err) => ({\n  type: PURCHASE_SUCCESS,\n  payload: err\n});\n","import { createStore, applyMiddleware } from 'redux';\nimport { routerMiddleware } from 'react-router-redux';\nimport thunk from 'redux-thunk';\nimport history from '../history';\nimport reducers from '../reducers';\n\nconst middleware = applyMiddleware(thunk, routerMiddleware(history));\nexport const store = createStore(reducers, middleware);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { signOut } from '../actions';\nimport img from '../images/shopping-cart.png';\n\nclass Navigation extends React.Component {\n    handleClick = () => {\n      const { signOut } = this.props;\n      signOut();\n    }\n\n    render() {\n      const { username, avatar } = this.props;\n      return (\n        <div className=\"d-flex justify-content-between align-items-center nav\">\n          <div className=\"nav-item mr-4\">\n            <Link to=\"/cart\">\n              <img\n                src={img}\n                alt=\"\"\n                style={{ width: '50px', height: '50px', cursor: 'pointer' }}\n              />\n            </Link>\n          </div>\n          <div className=\"nav-item mr-4\">\n            <button type=\"button\" className=\"btn btn-sm btn-primary\" onClick={this.handleClick}>Sign-Out</button>\n          </div>\n          <div className=\"nav-item mr-4\">\n            <img src={avatar} alt=\"\" className=\"rounded-circle\" style={{ width: '50px', height: '50px' }} />\n          </div>\n          <div className=\"nav-item mr-4\">\n            <span>{username}</span>\n          </div>\n        </div>\n      );\n    }\n}\nconst mapStateToProps = ({ user }) => ({\n  username: user.username,\n  avatar: user.avatar\n});\nconst mapPropsToDispatch = (dispatch) => ({ signOut: () => dispatch(signOut()) });\n\nexport default connect(mapStateToProps, mapPropsToDispatch)(Navigation);\n\nNavigation.propTypes = {\n  username: PropTypes.string,\n  avatar: PropTypes.string,\n  signOut: PropTypes.func\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nfunction Header({ children, user }) {\n  const val = 'JS BAND STORE/ Andrii Maruniak';\n  return (\n    <header className=\"d-flex justify-content-between align-items-center p-3 bg-warning text-white\">\n      <div style={{ cursor: 'pointer' }}>\n        {user.token ? <Link className=\"text-white\" to=\"/books\">{val}</Link>\n          : <Link className=\"text-white\" to=\"/signin\">{val}</Link>}\n      </div>\n      {children}\n    </header>\n  );\n}\nexport default connect(({ user }) => ({ user }))(Header);\n\nHeader.propTypes = {\n  children: PropTypes.element,\n  user: PropTypes.shape({\n    token: PropTypes.string.isRequired,\n  }).isRequired\n};\n","import React from 'react';\n// eslint-disable-next-line react/prop-types\nfunction Main({ children }) {\n  return (\n    <main>\n      {children}\n    </main>\n  );\n}\nexport default Main;\n","import React from 'react';\nimport './spinner.css';\n\nconst Spinner = () => (\n  <div className=\"l_main\">\n    <div className=\"l_square\">\n      <span />\n      <span />\n      <span />\n    </div>\n    <div className=\"l_square\">\n      <span />\n      <span />\n      <span />\n    </div>\n    <div className=\"l_square\">\n      <span />\n      <span />\n      <span />\n    </div>\n    <div className=\"l_square\">\n      <span />\n      <span />\n      <span />\n    </div>\n  </div>\n);\nexport default Spinner;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\n\nfunction BookItem({ book }) {\n  return (\n    <div\n      className=\"book col-sm-3 shadow rounded p-3\n      mr-3 mb-4 bg-white position\n    -relative text-black\"\n      style={{ height: '400px' }}\n    >\n      <div className=\"img-block mb-2\">\n        <img src={book.cover} alt=\"\" style={{ width: '100%', height: '190px' }} />\n      </div>\n      <h6 className=\"title\" style={{ height: '48px' }}>{book.title}</h6>\n      <p className=\"text text-break\">{book.author}</p>\n      <div className=\"d-flex justify-content-between\">\n        <div>\n          {book.price}\n          {' '}\n$\n        </div>\n        <Link to={`/books/${book.id}`}>\n          <button type=\"button\" className=\"btn btn-sm btn-primary\">\n          View\n          </button>\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default BookItem;\n\nBookItem.propTypes = {\n  book: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    count: PropTypes.number.isRequired,\n    price: PropTypes.number.isRequired,\n    title: PropTypes.string.isRequired,\n    author: PropTypes.string.isRequired,\n    level: PropTypes.string.isRequired,\n    description: PropTypes.string.isRequired,\n    cover: PropTypes.string.isRequired,\n    tags: PropTypes.array.isRequired\n  })\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { changeFilter } from '../../../actions';\n\nclass Filter extends React.Component {\n  handleChange = ({ target: { value, name } }) => {\n    const { changeFilter } = this.props;\n    changeFilter({ [name]: value });\n  };\n\n  render() {\n    return (\n      <section className=\"mt-4 container\">\n        <form className=\"filter d-flex\" method=\"#\">\n          <div className=\"item\">\n            <input\n              onChange={this.handleChange}\n              type=\"text\"\n              name=\"search\"\n              className=\"form-control mr-5\"\n              style={{ width: '400px' }}\n              placeholder=\"Search by title\"\n            />\n          </div>\n          <div className=\"item\">\n            <select onChange={this.handleChange} name=\"price\" className=\"form-control\">\n              <option value=\"none\">Price</option>\n              <option value=\"low_price\">0 &lsaquo; Price &lsaquo; 15</option>\n              <option value=\"medium_price\">15 &lsaquo; Price &lsaquo; 30</option>\n              <option value=\"high_price\">Price &rsaquo; 30</option>\n            </select>\n          </div>\n        </form>\n      </section>\n    );\n  }\n}\n\nFilter.propTypes = {\n  changeFilter: PropTypes.func.isRequired\n};\n\n\nexport default connect(null, { changeFilter })(Filter);\n","const config = {\n  baseURL: 'https://js-band-api.glitch.me/'\n};\n\nexport default config;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport Navigation from '../../components/Navigation';\nimport Header from '../../components/Header';\nimport Main from '../../components/Main';\nimport Spinner from '../../components/spinner/spinner';\nimport BookItem from './components/BookItem';\nimport Filter from './components/Filter';\nimport { getBooksFetch } from '../../services';\nimport { fetchBooks } from '../../actions';\n\nclass Catalog extends React.Component {\n  componentDidMount() {\n    const { getBooksFetch } = this.props;\n    getBooksFetch();\n  }\n\n  filter = () => {\n    const { books, search, price } = this.props;\n    const result = books.filter((item) => (search === '' || item.title.toLowerCase()\n      .search(new RegExp(`^${search.toLowerCase()}`, 'g')) !== -1))\n      .filter((item) => (this.priceTypes(price, item.price)));\n    return result;\n  }\n\n  priceTypes = (type, price) => {\n    const types = {\n      none: price,\n      low_price: price > 0 && price < 15,\n      medium_price: price > 15 && price < 30,\n      high_price: price > 30\n    };\n    return types[type];\n  }\n\n\n  render() {\n    const { loading, error } = this.props;\n    const newBooks = this.filter();\n    const hasData = !(loading || error);\n    const newItem = hasData ? newBooks.map((item) => (\n      <BookItem book={item} key={item.id} />\n    )) : null;\n\n    return (\n      <>\n        <Header>\n          <Navigation />\n        </Header>\n        <Main>\n          <Filter />\n          <div className=\"books-list d-flex flex-wrap justify-content-center mt-5\">\n            { loading ? <Spinner /> : null }\n            {!loading && error && 'Error ...'}\n            {newItem}\n          </div>\n        </Main>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => (\n  {\n    books: state.catalog.books,\n    loading: state.catalog.loading,\n    error: state.catalog.error,\n    search: state.filter.search,\n    price: state.filter.price,\n  }\n);\n\nconst mapDispatchToProps = (dispatch) => ({\n  getBooksFetch: () => {\n    dispatch(fetchBooks());\n    return dispatch(getBooksFetch());\n  }\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Catalog));\n\nCatalog.propTypes = {\n  getBooksFetch: PropTypes.func,\n  // eslint-disable-next-line react/forbid-prop-types\n  books: PropTypes.array,\n  loading: PropTypes.bool,\n  error: PropTypes.bool,\n  search: PropTypes.string,\n  price: PropTypes.string,\n};\n","import { replace } from 'connected-react-router';\nimport config from '../config';\nimport storage from '../storage/index';\nimport { fetchBooksSuccess, fetchBooksFail } from '../actions';\n\nexport const getBooksFetch = () => (dispatch) => {\n  const dataUser = JSON.parse(storage.get('user'));\n  const { token } = dataUser;\n\n  if (token) {\n    fetch(`${config.baseURL}books`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n    }).then((res) => res.json())\n      .then((response) => {\n        dispatch(fetchBooksSuccess(response));\n      })\n      .catch((err) => {\n        if (err.message === 'Unauthorized') {\n          storage.remove('user');\n          dispatch(replace('/signin'));\n        } else {\n          dispatch(fetchBooksFail(err));\n        }\n      });\n  }\n};\n","import React from 'react';\nimport './css/main.css';\n\nfunction NotFound() {\n  return (\n    <div id=\"notfound\">\n      <div className=\"notfound\">\n        <div className=\"notfound-404\">\n          <h1>404</h1>\n        </div>\n        <h2>Oops, The Page you are looking for can&apos;t be found!</h2>\n      </div>\n    </div>\n  );\n}\nexport default NotFound;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { addToCart } from '../../../actions';\n\nclass BookCounter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      temp: 1,\n      countBooks: '1',\n    };\n  }\n\n    handleChange = ({ target: { name, value } }) => {\n      const { book: { count } } = this.props;\n      if (value > count) {\n        const { temp } = this.state;\n        this.setState({ [name]: temp });\n        this.input.value = temp;\n      } else this.setState({ [name]: value, temp: value });\n    }\n\n    handleSubmit = (e) => {\n      e.preventDefault();\n      const {\n        book: {\n          id, title, price\n        }, addToCart\n      } = this.props;\n      const { countBooks } = this.state;\n      addToCart({\n        id, title, price, count: countBooks\n      });\n    }\n\n    render() {\n      const { countBooks } = this.state;\n      const { book: { price, count } } = this.props;\n      return (\n        <div\n          className=\"m-3 position-relative\"\n          style={{\n            width: '600px',\n            height: '400px',\n            borderStyle: 'dotted',\n            borderWidth: 2,\n            borderRadius: 1\n          }}\n        >\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"price d-flex justify-content-between m-4\">\n              <div className=\"price-item\"><h5>Price, $</h5></div>\n              <div className=\"price-item\"><h5>{price}</h5></div>\n            </div>\n            <div className=\"price d-flex justify-content-between m-4\">\n              <div className=\"price-item\"><h5>Count</h5></div>\n              <div className=\"price-item\">\n                <input\n                  onChange={this.handleChange}\n                  className=\"form-control\"\n                  name=\"countBooks\"\n                  type=\"number\"\n                  min=\"1\"\n                  max={count}\n                  defaultValue={countBooks}\n                  ref={(node) => { (this.input = node); }}\n                  required\n                />\n              </div>\n            </div>\n            <div className=\"total-price d-flex justify-content-between m-4\">\n              <div className=\"price-item\"><h5>Total price</h5></div>\n              <div className=\"price-item\">\n                <h5>{(countBooks > 1 ? countBooks * price : price).toFixed(2)}</h5>\n              </div>\n            </div>\n            <button\n              className=\"btn btn-lg btn-primary position-absolute\"\n              style={{ right: '20px', bottom: '40px' }}\n              type=\"submit\"\n            >\n              Add to cart\n            </button>\n          </form>\n        </div>\n      );\n    }\n}\nexport default connect(null, { addToCart })(BookCounter);\n\nBookCounter.propTypes = {\n  book: PropTypes.shape({\n    id: PropTypes.string,\n    title: PropTypes.string,\n    price: PropTypes.number,\n    count: PropTypes.number,\n  }),\n  addToCart: PropTypes.func\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport BookCounter from './BookCounter';\nimport Spinner from '../../../components/spinner/spinner';\n\nfunction BookContent(props) {\n  const { book } = props;\n  if (book.isLoading) return <Spinner />;\n  if (!book.isLoading && book.error) return 'Error ...';\n  if (!book.id) return !1;\n\n  return (\n    <div className=\"d-flex m-3\">\n      <div className=\"image-item mr-5\" style={{ width: '460px' }}>\n        <img src={book.cover} alt={book.title} className=\"mb-2 border\" style={{ width: '460px' }} />\n        <p>\nDescription:\n          {book.description}\n        </p>\n      </div>\n      <div className=\"desc\" style={{ width: '400px' }}>\n        <div className=\"title mb-3 pt-4\">\n          <h3>{book.title}</h3>\n        </div>\n        <div className=\"title mb-3\">\n          Author:\n          {' '}\n          {book.author}\n        </div>\n        <div className=\"level mb-3\">\n          Level:\n          {' '}\n          {book.level}\n        </div>\n        <div className=\"tags mb-2\">\n          Tags:\n          {' '}\n          {book.tags.map((item) => item).join(', ')}\n        </div>\n      </div>\n      <BookCounter book={book} />\n    </div>\n  );\n}\nexport default connect(({ book }) => ({ book }))(BookContent);\n\nBookContent.propTypes = {\n  book: PropTypes.shape({\n    id: PropTypes.string,\n    count: PropTypes.number,\n    price: PropTypes.number,\n    title: PropTypes.string,\n    author: PropTypes.string,\n    level: PropTypes.string,\n    description: PropTypes.string,\n    cover: PropTypes.string,\n    tags: PropTypes.array,\n    isLoading: PropTypes.bool,\n    error: PropTypes.bool\n  })\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport Navigation from '../../components/Navigation';\nimport Header from '../../components/Header';\nimport Main from '../../components/Main';\nimport BookContent from './components/BookContent';\nimport { getBookFetch } from '../../services';\n\nclass Book extends React.Component {\n  componentDidMount() {\n    const { getBookFetch, match } = this.props;\n    const { id } = match.params;\n    getBookFetch(id);\n  }\n\n  render() {\n    return (\n      <>\n        <Header>\n          <Navigation />\n        </Header>\n        <Main>\n          <BookContent />\n        </Main>\n      </>\n    );\n  }\n}\n\nexport default withRouter(connect(null, { getBookFetch })(Book));\n\nBook.propTypes = {\n  getBookFetch: PropTypes.func,\n  match: PropTypes.shape({\n    params: PropTypes.object,\n  })\n};\n","import { replace } from 'connected-react-router';\nimport config from '../config';\nimport storage from '../storage';\nimport { fetchBookSuccess, fetchBookFail } from '../actions';\n\nexport const getBookFetch = (id) => (dispatch) => {\n  const dataUser = JSON.parse(storage.get('user'));\n  const { token } = dataUser;\n  if (token) {\n    fetch(`${config.baseURL}books/${id}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        dispatch(fetchBookSuccess(data));\n      })\n      .catch((err) => {\n        if (err === 'Unauthorized') {\n          storage.remove('user');\n          dispatch(replace('/signin'));\n        } else {\n          dispatch(fetchBookFail(err));\n        }\n      });\n  }\n};\n","import React from 'react';\nimport img from '../../../images/shopping-cart.png';\n\nfunction CartEmpty() {\n  return (\n\n    <div\n      className=\"cart-empty text-center\"\n      style={{\n        width: '200px', height: '250px', margin: '0 auto', paddingTop: '200px'\n      }}\n    >\n      <img src={img} alt=\"\" style={{ width: '120px', height: '150px' }} />\n      <p>Cart is empty...</p>\n    </div>\n  );\n}\nexport default CartEmpty;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction CartItem({ info }) {\n  return (\n    <div className=\"cart-item d-flex justify-content-between align-items-center border p-4\">\n      <div className=\"item d-flex justify-content-between\">\n        <div className=\"cart-title mr-3\">{info.title}</div>\n        <div className=\"cart-count\">\nCount:\n          {' '}\n          {info.count}\n        </div>\n      </div>\n      <div className=\"item\">\nTotal price:\n        {' '}\n        {info.count * info.price}\n        {'$'}\n      </div>\n    </div>\n  );\n}\nexport default CartItem;\n\nCartItem.propTypes = {\n  info: PropTypes.shape({\n    title: PropTypes.string,\n    count: PropTypes.string,\n    price: PropTypes.number,\n  })\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport CartEmpty from './CartEmpty';\nimport CartItem from './CartItem';\nimport { addPurchase } from '../../../services';\n\nclass CartList extends React.Component {\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const { addPurchase, cart: { books } } = this.props;\n    const list = books.map((item) => item.id);\n    addPurchase({ books: list });\n  }\n\n  render() {\n    const { cart } = this.props;\n\n    return (\n      <div className=\"cart-list position-relative mt-3\">\n        <div className=\"d-flex flex-row-reverse\">\n          <button\n            type=\"button\"\n            className=\"btn  btn-primary mr-4\"\n            onClick={this.handleSubmit}\n            disabled={cart.books.length < 1}\n          >\nPurchase\n          </button>\n        </div>\n        {cart.books.length < 1 ? <CartEmpty /> : (\n          <div className=\"m-2\">\n            {cart.books.map((item) => <CartItem key={item.id} info={item} />)}\n            <div className=\"total-price-item d-flex flex-row-reverse mt-2\">\n              <div>\n                <h5>\nTotal Price, $\n                  {' '}\n                  {cart.books.length > 0\n                    ? cart.books.reduce((sum, item) => (sum + (item.count * item.price)), 0) : null}\n\n                </h5>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\nexport default connect(({ cart }) => ({ cart }), { addPurchase })(CartList);\n\nCartList.propTypes = {\n  cart: PropTypes.shape({\n    books: PropTypes.any,\n    message: PropTypes.any\n  }),\n  addPurchase: PropTypes.func\n};\n","import config from '../config';\nimport storage from '../storage/index';\nimport { purchaseSuccess, purchaseFail } from '../actions';\n\nexport const addPurchase = (data) => (dispatch) => {\n  const dataUser = JSON.parse(storage.get('user'));\n  const { token } = dataUser;\n\n  if (token) {\n    fetch(`${config.baseURL}purchase`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify(data)\n    }).then((res) => res.json())\n      .then((response) => {\n        dispatch(purchaseSuccess(response));\n      })\n      .catch((err) => {\n        dispatch(purchaseFail(err));\n      });\n  }\n};\n","import React from 'react';\nimport Header from '../../components/Header';\nimport Navigation from '../../components/Navigation';\nimport Main from '../../components/Main';\nimport CartList from './components/CartList';\n\nfunction Cart() {\n  return (\n    <>\n      <Header>\n        <Navigation />\n      </Header>\n      <Main>\n        <CartList />\n      </Main>\n    </>\n  );\n}\nexport default Cart;\n","import React from 'react';\nimport { Redirect, Switch, Route } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Catalog from '../pages/CatalogPage';\nimport NotFound from '../pages/NotFoundPage';\nimport Book from '../pages/BookPage';\nimport Cart from '../pages/CartPage';\n\nfunction ProtectedRoutes({ userToken }) {\n  return userToken ? (\n    <>\n      <Switch>\n        <Redirect from=\"/signin\" to=\"/books\" />\n        <Route path=\"/books/:id\" component={Book} />\n        <Route path=\"/books\" component={Catalog} />\n        <Route path=\"/cart\" component={Cart} />\n        <Route path=\"*\" component={NotFound} />\n      </Switch>\n    </>\n  )\n    : (\n      <>\n        <Redirect to=\"/signin\" />\n      </>\n    );\n}\n\nconst mapStateToProps = (state) => ({\n  userToken: state.user.token,\n});\nexport default connect(mapStateToProps)(ProtectedRoutes);\n\nProtectedRoutes.propTypes = {\n  userToken: PropTypes.string\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport Header from '../../components/Header';\nimport Main from '../../components/Main';\nimport { userSignIn } from '../../services';\nimport img from '../../images/defaultPhoto.jpg';\n\nclass SignIn extends React.Component {\n  handleValidation = (value) => {\n    const valueLength = value.length;\n    const errorField = this.error;\n    errorField.innerHTML = '';\n    if (!this.input.value || valueLength < 4 || valueLength > 16) {\n      errorField.innerHTML = 'Field is not valid';\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const { login } = this.props;\n    const username = this.input.value;\n    const isValid = this.handleValidation(username);\n    if (isValid) {\n      login(username);\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <Header />\n        <Main>\n          <div className=\"d-flex justify-content-center mt-5\">\n            <div className=\"text-center\">\n              <img src={img} alt=\"\" style={{ height: '200px', width: '200px' }} />\n              <form>\n                <div className=\"form-group mt-3\">\n                  <label htmlFor=\"username\" style={{ display: 'block' }} className=\"font-weight-bold\">\n                Username\n                    <input\n                      type=\"text\"\n                      name=\"username\"\n                      className=\"form-control mt-2\"\n                      placeholder=\"type Username\"\n                      ref={(node) => { this.input = node; }}\n                      required\n                    />\n                    <div\n                      className=\"error text-danger text-break text-center\"\n                      ref={(node) => { this.error = node; }}\n                    />\n                  </label>\n                  <div\n                    className=\"btn btn-block btn-primary mt-3\"\n                    style={{ cursor: 'pointer' }}\n                    onClick={(e) => this.handleSubmit(e)}\n                  >\nSign-In\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n        </Main>\n      </>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  login: (userInfo) => dispatch(userSignIn(userInfo))\n});\n\nexport default withRouter(connect(null, mapDispatchToProps)(SignIn));\n\nSignIn.propTypes = {\n  login: PropTypes.func\n};\n","import { replace } from 'connected-react-router';\nimport config from '../config';\nimport storage from '../storage/index';\nimport { signIn } from '../actions';\n\nexport const userSignIn = (username) => (dispatch) => {\n  fetch(`${config.baseURL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n    },\n    body: JSON.stringify({ username })\n  }).then((res) => res.json())\n    .then((data) => {\n      storage.add('user', data);\n      dispatch(signIn(data));\n      dispatch(replace('/books'));\n    });\n};\n","import React from 'react';\nimport {\n  HashRouter as Router, Switch, Route\n} from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { checkSign } from '../actions';\nimport ProtectedRoutes from '../routes/ProtectedRoutes';\nimport SignIn from '../pages/SignInPage';\n\nfunction App({ checkSign }) {\n  checkSign();\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/signin\" component={SignIn} />\n        <Route component={ProtectedRoutes} />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default connect(null, { checkSign })(App);\n\nApp.propTypes = {\n  checkSign: PropTypes.func\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { store } from './store';\nimport history from './history';\nimport App from './components/App';\n\nReactDOM.render(\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <App />\n    </ConnectedRouter>\n  </Provider>,\n  document.getElementById('root'));\n"],"sourceRoot":""}